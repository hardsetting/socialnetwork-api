## Database Dump

This folder contains the dump of the database, including both schema and data,
as well as some utility scripts for dumping and restoring the database.

The definition of some views and functions are conveniently kept in separated files as well.

## Tables

#### auth_token
Token used for authentication. A user can have multiple tokens
active at each times (e.g. one for each client). The token has an expiration datetime,
after which the token has to be refreshed with the provided refresh_token, or a new token must be requsted.

#### user
Contains all information regarding users including name, surname, gender, username.
This table was generated by merging data from facebook100 network and IMDb movie actors database.

#### friendship
Each row represent an edge in the social network graph.
The information regarding which user requested or was requested the friendship is
made clear, also so that the network can be analyzed as a directed graph.
The "accepted_at" field determines both the whether the request was accepted and when it was accepted. 

#### post
User activities on profile. Can be edited.

#### reaction
Reaction associated to a post. The type is represented as a tinyint, and the meaning
of each value is shown in the model js file.
(user_id, post_id) is unique, meaning that a user can react to a post only once, and only edit
it afterwards.

#### upload
A table containing all user uploaded files. In this demo the user never
actually uploads anything, but the table is ready to accomodate such feature.

#### notification
Notification of friends activity. In this demo the only activity that triggers
notifications are posts, and they are created in tr_users_posts.

## Snippets

#### tr_user_friends.sql
A trigger that keeps updated the friends_count derived field in "user" table.

#### tr_user_posts.sql
A trigger that keeps updated the posts_count derived field in "user" table,
as well creating a post notification for each friend of the creator user when inserting. 

#### vw_friendship
